[{"id":"45423960.c98ee8","type":"function","z":"ef783a52.b78d88","name":"Pulser","func":"var freq = 60;\nvar duration = 5;\n\nif (msg.topic == \"duration\") {\n    duration = msg.payload\n}\n\nif (msg.topic == \"frequency\") { \n    freq == msg.payload;\n}\n\nfunction turn_off() {\n    msg.payload = 1;\n    node.send( msg);\n}\n\nfunction turn_on(dur = 5) {\n    msg.payload = 0;\n    node.send( msg );\n    setTimeout(turn_off, dur * 1000);\n}\n\nif (msg.payload == \"GO\") {\n    setInterval(turn_on, freq * 1000, duration);\n}\nreturn null;","outputs":1,"noerr":0,"x":409,"y":215,"wires":[["3c516360.242b3c","f5e0db5c.c41228","169e14eb.d68dfb"]]}]